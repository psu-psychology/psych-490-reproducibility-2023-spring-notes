# (PART) R Code {-} 

# Survey 1 results {-}

## Purpose {-}

This document summarizes the analysis of data for Survey 1 on scientific norms and counter-norms (https://forms.gle/1zqzfNNXWyCgiDSJ9).

## Background {-}

The survey questions were derived from the Appendix in [[@Kardash2012-kq]](https://doi.org/10.1007/s11251-011-9195-0).
We thank these authors for publishing the survey questions in their article so that we could reuse them for our class.

## Set-up {-}

We load the required R packages.

```{r survey-1-setup}
suppressPackageStartupMessages(library("tidyverse")) # for pipe %>%
suppressPackageStartupMessages(library("googledrive"))
suppressPackageStartupMessages(library("magrittr"))
suppressPackageStartupMessages(library("dplyr"))
suppressPackageStartupMessages(library("ggplot2"))
```

## Download data {-}

Download the data file from the spreadsheet generated by the Google Form into a comma-separated value (CSV) file in a local directory called `csv/`.

Authenticate to Google.

```{r}
#googledrive::drive_auth(email = "rick.o.gilmore@gmail.com")
```

```{r}
if (!dir.exists('csv')) {
  dir.create('csv')
}

csv_fn <- "csv/psych-490-2023-spring-survey-01.csv"

googledrive::drive_download(file = 'PSYCH 490.002 Survey 1 (Responses)', path = csv_fn, type = 'csv', overwrite = TRUE)
```

## Clean data {-}

Load the data file.

```{r}
if (file.exists(csv_fn)) {
  survey_01 <- readr::read_csv(csv_fn, show_col_types = FALSE)
} else {
  message("File not found: ", csv_fn)
  survey_01 <- NULL
}
```

Examine the variable names.

```{r}
if (is.null(survey_01)) {
  warning("Error loading data file")
} else {
  names(survey_01)
}
```

These variable names are too long to be useful.
Let's look at the source publication [[@Kardash2012-kq]](https://doi.org/10.1007/s11251-011-9195-0) to see if we can simplify them in a useful way.

So, the Appendix labels each question with a short phrase and notes whether the concept is a norm (N) or counter-norm (CN).
Let's rename the variables using the single words.

```{r}
new_names <- c("Timestamp", "Disinterestedness", "Organized Skepticism", "Particularism",
               "Communality", "Organized Dogmatism", "Self-interestedness",
               "Universalism", "Solitariness", "Comments")

names(survey_01) <- new_names
```

These data are 'wide', meaning that there are multiple variables for each respondent.
The data will be easier to visualize and analyze if we make the data 'longer'.

```{r}
survey_01_long <- survey_01 %>%
  tidyr::pivot_longer(., !c('Timestamp', 'Comments'), 
                      names_to = "norm_counternorm", values_to = "rating")

```

Finally, there is a "test" set of responses that I used to test this data processing workflow.
We should delete those responses since they are nonsensical--I just hit random buttons to make some data.

```{r}
survey_01_long <- survey_01_long %>%
  dplyr::filter(., !(Comments == "Test"))
```

## Visualize data {-}

```{r}

```
